<!DOCTYPE html>
<html lang="fr">

<head>
  <title>ZdS prime</title>
  <meta charset="utf-8">
  <style>
    * {
      font-family: sans-serif;
    }

    h1,
    h2 {
      font-family: serif;
    }

    main {
      max-width: 800px;
      margin: 0 auto;
      padding: 10px;
    }

    h1 {
      text-align: center;
    }

    #sentence.loaded {
      font-weight: bold;
      font-size: 1.2rem;
      margin: auto;
      margin-top: 30px;
      width: 75%;
      border: 5px solid black;
      padding: 20px;
      text-align: center;
    }
  </style>
  <script>
    function isPrime(n) {
      let i = 2;
      while (i <= Math.sqrt(n)) {
        if (n % i < 1) {
          return false
        }
        i++
      }
      return n > 1
    }

    function getSentence(n) {
      const root = `Le nombre de publications sur ZesteÂ deÂ Savoir (${n})`
      if (isPrime(n)) {
        return `${root} est premierÂ ! ðŸ™‚`
      } else {
        return `${root} n'est pas premier... ðŸ™`
      }
    }

    function query() {
      fetch("https://zestedesavoir.com")
        .then(response => response.text())
        .then(text => {
          const parser = new DOMParser();
          const fetchedDocument = parser.parseFromString(text, "text/html");
          const sentence = fetchedDocument.querySelector(".write-tutorial-text>p").innerHTML
          const str_npub = sentence.match(/(\d+)/g)[0]
          const npub = Number(str_npub)
          const elt = document.querySelector("#sentence")
          elt.textContent = getSentence(npub)
          elt.classList.add('loaded');
        })
    }

    window.addEventListener('load', query())
  </script>
</head>

<body>
  <main>
    <h1>ZdS prime</h1>
    <p>
      <em>Le nombre de publications sur <a href="https://zestedesavoir.com">Zeste de Savoir</a>
        est-il premierÂ ?</em> Si vous vous posez ce genre de questions, vous Ãªtes au bon endroit.
    </p>
    <p>

    </p>
    <div id="frame">
      <p id="sentence">Chargement en cours...</p>
    </div>
  </main>
</body>

</html>
